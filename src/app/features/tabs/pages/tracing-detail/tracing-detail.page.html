<ion-header [translucent]="true">
  <ion-toolbar class="toolbar">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tracing"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle de seguimiento</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <section class="ion-margin">
    <form [formGroup]="detailForm">
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-input label="Región" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="region"></ion-input>
            <ion-input label="Zona" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="zone"></ion-input>
            <ion-input label="Sede" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="headquarter"></ion-input>
            <ion-input label="Actividad" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="activity"></ion-input>
            <ion-input label="Subactividad" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="subactivity"></ion-input>
          </ion-col>
          <ion-col>
            <ion-input label="Departamento" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="department"></ion-input>
            <ion-input label="Municipio" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="city"></ion-input>
            <ion-input label="Tutor" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="tutor"></ion-input>
            <ion-input label="Enfoque" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" formControlName="approach"></ion-input>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
    <h4>Evidencia fotográfica</h4>
    <ion-grid>
      <ion-col>
        <ion-card>
          <table>
            <tr>
              <th>Nombre</th>
              <th>Fecha</th>
              <th>Ver detalle</th>
            </tr>
            @for (item of photos; track item.name){
              <tr>
                <td>{{item.name}}</td>
                <td>{{item.date}}</td>
                <td>
                  <ion-button fill="clear" color="primary"  [routerLink]="['/tracing', currentId, 'photo-evidence', item.id]">
                    <ion-icon slot="icon-only" name="eye-outline"></ion-icon>
                  </ion-button>
                </td>
              </tr>
            }
          </table>
        </ion-card>
      </ion-col>
    </ion-grid>
    <ion-textarea label="Descripción" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" [autoGrow]="true" [(ngModel)]="description" disabled></ion-textarea>
    <ion-textarea label="Novedades" label-placement="floating" fill="outline" type="text" class="ion-margin-bottom" [autoGrow]="true" [(ngModel)]="news" disabled></ion-textarea>
    <h4>Anexos</h4>
    <ion-grid>
      <ion-col>
        <ion-card>
          <table>
            <tr>
              <th>Nombre</th>
              <th>Ver detalle</th>
            </tr>
            @for (item of photos; track item.name){
              <tr>
                <td>{{item.name}}</td>
                <td>
                  <ion-button fill="clear" color="primary" [routerLink]="['/tracing', currentId, 'attached', item.id]">
                    <ion-icon slot="icon-only" name="eye-outline"></ion-icon>
                  </ion-button>
                </td>
              </tr>
            }
          </table>
        </ion-card>
      </ion-col>
    </ion-grid>
  </section>
</ion-content>
